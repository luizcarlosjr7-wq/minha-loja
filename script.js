const MEU_TELEFONE="5575912345678",categorias=[{nome:"Vestido",produtos:[{id:2,nome:"Vestido Paula",preco:55,descricao:"Malha canelada. Tamanho 40/44.",promocao:!1,imagens:["imagens/vestidopaulavermelho.png","imagens/vestidopaulaamarelo.png","imagens/vestidopaulaazul.png"],variacoes:[{cor:"Vermelho",imagem:"imagens/vestidopaulavermelho.png"},{cor:"Amarelo",imagem:"imagens/vestidopaulaamarelo.png"},{cor:"Azul",imagem:"imagens/vestidopaulaazul.png"}],peso:.5,altura:4,largura:5,comprimento:6},{id:3,nome:"Vestido Adriana",preco:55,descricao:"Malha canelada. Tamanho 40/44.",promocao:!1,imagens:["imagens/adrianaamarelo.png","imagens/adrianaazul.png","imagens/adrianamarrom.png","imagens/adrianaverde.png","imagens/adrianavermelho.png"],variacoes:[{cor:"Amarelo",imagem:"imagens/adrianaamarelo.png"},{cor:"Azul",imagem:"imagens/adrianaazul.png"},{cor:"Marrom",imagem:"imagens/adrianamarrom.png"},{cor:"Verde",imagem:"imagens/adrianaverde.png"},{cor:"Vermelho",imagem:"imagens/adrianavermelho.png"}],peso:.5,altura:4,largura:5,comprimento:6},{id:4,nome:"Vestido Catarina",preco:65,descricao:"Malha Scott. Tamanho 40/44.",promocao:!0,imagens:["imagens/vestidocatarinaazul.png","imagens/vestidocatarinalaranja.png","imagens/vestidocatarinanude.png","imagens/vestidocatarinapreto.png","imagens/vestidocatarinarosa.png","imagens/vestidocatarinaverde.png"],variacoes:[{cor:"Azul",imagem:"imagens/vestidocatarinaazul.png"},{cor:"Laranja",imagem:"imagens/vestidocatarinalaranja.png"},{cor:"Nude",imagem:"imagens/vestidocatarinanude.png"},{cor:"Preto",imagem:"imagens/vestidocatarinapreto.png"},{cor:"Rosa",imagem:"imagens/vestidocatarinarosa.png"},{cor:"Verde",imagem:"imagens/vestidocatarinaverde.png"}],peso:.5,altura:4,largura:5,comprimento:6},{id:5,nome:"Vestido God√™ Rodado",preco:55,descricao:"Crepe Dior. Tamanho √∫nico 40/44.",promocao:!1,imagens:["imagens/vestidogode1.png","imagens/vestidogode2.png","imagens/vestidogode3.png","imagens/vestidogode4.png","imagens/vestidogode5.png","imagens/vestidogode6.png","imagens/vestidogode7.png","imagens/vestidogode8.png","imagens/vestidogode9.png","imagens/vestidogode10.png"],variacoes:[{cor:"Azul Royal",imagem:"imagens/vestidogode1.png"},{cor:"Verde √Ågua",imagem:"imagens/vestidogode2.png"},{cor:"Preto",imagem:"imagens/vestidogode3.png"},{cor:"F√∫csia",imagem:"imagens/vestidogode4.png"},{cor:"Vinho",imagem:"imagens/vestidogode5.png"},{cor:"Verde Bandeira",imagem:"imagens/vestidogode6.png"},{cor:"Rosa Pink",imagem:"imagens/vestidogode7.png"},{cor:"Turquesa",imagem:"imagens/vestidogode8.png"},{cor:"Coral",imagem:"imagens/vestidogode9.png"},{cor:"Marsala",imagem:"imagens/vestidogode10.png"}],peso:.5,altura:4,largura:5,comprimento:6},{id:6,nome:"Vestido Louise",preco:60,descricao:"Tecido Duna. Tamanho √∫nico veste 38/42.",promocao:!1,imagens:["imagens/vestidolouise.png"],variacoes:[{cor:"Roxo",imagem:"imagens/vestidolouise.png"},{cor:"Vermelho",imagem:"imagens/vestidolouise.png"},{cor:"Lil√°s",imagem:"imagens/vestidolouise.png"},{cor:"Bege",imagem:"imagens/vestidolouise.png"}],peso:.5,altura:4,largura:5,comprimento:6},{id:7,nome:"Vestido Camila",preco:55,descricao:"Malha canelada. Tamanho 40/44.",promocao:!1,imagens:["imagens/vestidocamila.png","imagens/vestidocamila1.png"],variacoes:[{cor:"Verde",imagem:"imagens/vestidocamila.png"},{cor:"Amarelo",imagem:"imagens/vestidocamila1.png"}],peso:.5,altura:4,largura:5,comprimento:6}]},{nome:"Conjunto",produtos:[{id:8,nome:"Conjunto 3 pe√ßas (Saia)",preco:70,descricao:"Blusa, blazer, saia e cinto. Malha crepe Dior e Suede. Tamanho 40/44.",promocao:!1,imagens:["imagens/conj3pecas.png","imagens/conj3pecas1.png","imagens/conj3pecas2.png","imagens/conj3pecas3.png","imagens/conj3pecas4.png","imagens/conj3pecas5.png","imagens/conj3pecas6.png"],variacoes:[{cor:"Op√ß√£o 1",imagem:"imagens/conj3pecas.png"},{cor:"Op√ß√£o 2",imagem:"imagens/conj3pecas1.png"},{cor:"Op√ß√£o 3",imagem:"imagens/conj3pecas2.png"},{cor:"Op√ß√£o 4",imagem:"imagens/conj3pecas3.png"},{cor:"Op√ß√£o 5",imagem:"imagens/conj3pecas4.png"},{cor:"Op√ß√£o 6",imagem:"imagens/conj3pecas5.png"},{cor:"Op√ß√£o 7",imagem:"imagens/conj3pecas6.png"}],peso:.5,altura:4,largura:5,comprimento:6},{id:9,nome:"Conjunto 3 pe√ßas (Cinto)",preco:65,descricao:"Blusa, blazer, saia e cinto. Malha crepe Dior e Suede. Tamanho 40/44.",promocao:!1,imagens:["imagens/conjuntolongo1.png","imagens/conjuntolongo2.png","imagens/conjuntolongo3.png","imagens/conjuntolongo4.png","imagens/conjuntolongo5.png","imagens/conjuntolongo6.png","imagens/conjuntolongo7.png"],variacoes:[{cor:"Op√ß√£o 1",imagem:"imagens/conjuntolongo1.png"},{cor:"Op√ß√£o 2",imagem:"imagens/conjuntolongo2.png"},{cor:"Op√ß√£o 3",imagem:"imagens/conjuntolongo3.png"},{cor:"Op√ß√£o 4",imagem:"imagens/conjuntolongo4.png"},{cor:"Op√ß√£o 5",imagem:"imagens/conjuntolongo5.png"},{cor:"Op√ß√£o 6",imagem:"imagens/conjuntolongo6.png"},{cor:"Op√ß√£o 7",imagem:"imagens/conjuntolongo7.png"}],peso:.5,altura:4,largura:5,comprimento:6},{id:10,nome:"Conjunto Vit√≥ria",preco:65,descricao:"Acompanha blusa, saia e cinto. Saia com el√°stico na cintura. Crepe Duna. Tamanho 42/44.",promocao:!0,imagens:["imagens/conjuntosocial.png","imagens/conjuntosocial1.png","imagens/conjuntosocial2.png"],variacoes:[{cor:"Op√ß√£o 1",imagem:"imagens/conjuntosocial.png"},{cor:"Op√ß√£o 2",imagem:"imagens/conjuntosocial1.png"},{cor:"Op√ß√£o 3",imagem:"imagens/conjuntosocial2.png"}],peso:.5,altura:4,largura:5,comprimento:6}]},{nome:"Salopete",produtos:[{id:1,nome:"Salopete S√¥nia",preco:55,descricao:"Malha canelada. Tamanho 40/44.",promocao:!1,imagens:["imagens/salopete-sonia-amarela.png","imagens/salopete-sonia-azul.png","imagens/salopete-sonia-caramelo.png","imagens/salopete-sonia-verde.png","imagens/salopete-sonia-vermelho.png"],variacoes:[{cor:"Amarela",imagem:"imagens/salopete-sonia-amarela.png"},{cor:"Azul",imagem:"imagens/salopete-sonia-azul.png"},{cor:"Caramelo",imagem:"imagens/salopete-sonia-caramelo.png"},{cor:"Verde",imagem:"imagens/salopete-sonia-verde.png"},{cor:"Vermelho",imagem:"imagens/salopete-sonia-vermelho.png"}],peso:.5,altura:4,largura:5,comprimento:6}]},{nome:"Moletom",produtos:[]}],carrosselTimers={};let carrinho=[],subtotal=0,valorFrete=0;document.addEventListener("DOMContentLoaded",(()=>{renderizarProdutos(categorias),configurarEventListeners()}));function configurarEventListeners(){const e=document.getElementById("banner-promocional");e&&e.querySelector("#fechar-banner").addEventListener("click",(()=>e.style.display="none")),document.getElementById("barra-busca").addEventListener("input",(e=>renderizarProdutos(e.target.value?filtrarProdutos(e.target.value):categorias))),document.getElementById("btn-continuar").addEventListener("click",(()=>{0<carrinho.length?(document.getElementById("etapa-carrinho").style.display="none",document.getElementById("etapa-formulario").style.display="block"):alert("Seu carrinho est√° vazio!")})),document.getElementById("btn-voltar").addEventListener("click",(()=>{document.getElementById("etapa-carrinho").style.display="block",document.getElementById("etapa-formulario").style.display="none"})),document.getElementById("btn-finalizar-whatsapp").addEventListener("click",finalizarPedido);const o=document.getElementById("modal-carrinho");document.getElementById("carrinho-fab").addEventListener("click",(()=>{atualizarModalCarrinho(),o.style.display="flex"})),o.querySelector("#fechar-modal").addEventListener("click",(()=>o.style.display="none")),window.addEventListener("click",(e=>{e.target==o&&(o.style.display="none")}));let t;document.getElementById("cep").addEventListener("input",(e=>{e.target.value=e.target.value.replace(/\D/g,""),clearTimeout(t),8===e.target.value.length&&(t=setTimeout(calcularFrete,500))}))}async function calcularFrete(){const e=document.getElementById("cep"),o=document.getElementById("opcoes-frete-container"),t=e.value.replace(/\D/g,"");if(valorFrete=0,atualizarTotalComFrete(),o.innerHTML="",8!==t.length||0===carrinho.length)return;o.style.display="block",o.innerHTML="<p>Calculando frete...</p>";const n=carrinho.map((e=>({peso:e.peso,altura:e.altura,largura:e.largura,comprimento:e.comprimento})));try{const e=await fetch("/.netlify/functions/calcular-frete",{method:"POST",body:JSON.stringify({items:n,cep_destino:t})}),r=await e.json();o.innerHTML="<h4>Op√ß√µes de Entrega</h4>",e.ok&&0<r.length?r.forEach((e=>{if(e.error)return;const t=parseFloat(e.price),n=`\n                    <div class="radio-grupo">\n                        <input type="radio" id="frete-${e.id}" name="opcao_frete" value="${t}" data-nome="${e.name} (R$ ${t.toFixed(2).replace(".",",")})">\n                        <label for="frete-${e.id}">${e.name} - R$ ${t.toFixed(2).replace(".",",")} (Prazo: ${e.delivery_time} dias)</label>\n                    </div>`;o.innerHTML+=n})):o.innerHTML+=`<p>${r.message||"Nenhuma op√ß√£o de frete encontrada."}</p>`,document.querySelectorAll('input[name="opcao_frete"]').forEach((e=>{e.addEventListener("change",(e=>{valorFrete=parseFloat(e.target.value),atualizarTotalComFrete()}))}))}catch(e){o.innerHTML='<p style="color: red;">Erro ao calcular o frete. Tente novamente.</p>'}}function atualizarTotalComFrete(){document.getElementById("preco-total").innerText=`R$ ${(subtotal+valorFrete).toFixed(2).replace(".",",")}`}function atualizarModalCarrinho(){const e=document.getElementById("carrinho-itens");subtotal=0,e.innerHTML=0===carrinho.length?"<p>Seu carrinho est√° vazio.</p>":"",carrinho.forEach(((o,t)=>{const n=o.cor_selecionada?`${o.nome} (${o.cor_selecionada})`:o.nome;e.innerHTML+=`<div class="carrinho-item"><span>${n}</span><div><span>R$ ${o.preco.toFixed(2).replace(".",",")}</span><button class="btn-remover-item" data-index="${t}">üóëÔ∏è</button></div></div>`,subtotal+=o.preco})),document.getElementById("subtotal-carrinho").innerText=`R$ ${subtotal.toFixed(2).replace(".",",")}`,atualizarTotalComFrete(),document.querySelectorAll(".btn-remover-item").forEach((e=>{e.addEventListener("click",(e=>removerItemDoCarrinho(e.currentTarget.getAttribute("data-index"))))}))}function removerItemDoCarrinho(e){carrinho.splice(e,1),valorFrete=0,document.getElementById("opcoes-frete-container").innerHTML="",document.getElementById("cep").value="",atualizarContadorCarrinho(),atualizarModalCarrinho()}function finalizarPedido(){const e=document.getElementById("nome").value,o=document.getElementById("endereco").value,t=document.getElementById("cep").value,n=document.getElementById("pagamento").value,r=document.querySelector('input[name="opcao_frete"]:checked');if(!t||!o||!e)return void alert("Por favor, preencha todos os dados de entrega.");if(0<carrinho.length&&!r)return void alert("Por favor, selecione uma op√ß√£o de frete.");let a=`Ol√°! Gostaria de fazer um novo pedido:\n\n*üìù ITENS DO PEDIDO:*\n`;carrinho.forEach((e=>{const o=e.cor_selecionada?`${e.nome} (Cor: ${e.cor_selecionada})`:e.nome;a+=`- ${o} (R$ ${e.preco.toFixed(2).replace(".",",")})\n`})),a+=`\n*SUBTOTAL: R$ ${subtotal.toFixed(2).replace(".",",")}*`;const c=r.getAttribute("data-nome");a+=`\n*ENTREGA: ${c}*`,a+=`\n*üí∞ TOTAL DO PEDIDO: R$ ${(subtotal+valorFrete).toFixed(2).replace(".",",")}*`,a+=`\n\n-------------------------------------\n\n*üë§ DADOS DO CLIENTE:*\n*Nome:* ${e}\n*Endere√ßo:* ${o}\n*CEP:* ${t}\n*Forma de Pagamento:* ${n}`,window.open(`https://wa.me/${MEU_TELEFONE}?text=${encodeURIComponent(a)}`,"_blank")}function atualizarContadorCarrinho(){const e=document.getElementById("carrinho-contador");e.innerText=carrinho.length,e.parentElement.style.display=0<carrinho.length?"flex":"none"}function adicionarAoCarrinho(e,o){const t=encontrarProdutoPorId(e);if(!t)return;let n="";const r=document.querySelector(`.variacao-select[data-produto-id="${e}"]`);if(r&&0<t.variacoes.length&&(n=r.value,!n))return void alert(`Escolha uma cor para "${t.nome}".`);carrinho.push({...t,cor_selecionada:n}),atualizarContadorCarrinho(),o&&(o.innerText="Adicionado ‚úì",o.disabled=!0,setTimeout((()=>{o.innerText="Adicionar ao Carrinho",o.disabled=!1}),2e3))}function encontrarProdutoPorId(e){for(const o of categorias){const t=o.produtos.find((o=>o.id==e));if(t)return t}return null}function filtrarProdutos(e){return e=e.toLowerCase(),categorias.map((o=>({...o,produtos:o.produtos.filter((o=>o.nome.toLowerCase().includes(e)))}))).filter((e=>0<e.produtos.length))}function renderizarProdutos(e){const o=document.getElementById("lista-produtos");o.innerHTML="",Object.values(carrosselTimers).forEach(clearInterval);!e.some((e=>0<e.produtos.length))?o.innerHTML='<p style="grid-column: 1 / -1; text-align: center;">Nenhum produto encontrado.</p>':e.forEach((e=>{if(0===e.produtos.length)return;const t=document.createElement("h2");t.className="titulo-categoria",t.textContent=e.nome,o.appendChild(t),e.produtos.forEach((e=>{const t=document.createElement("article");t.className="produto";let n=e.imagens&&0<e.imagens.length?e.imagens.map(((o,t)=>`<img src="${o}" alt="${e.nome}" class="carousel-image ${0===t?"visivel":""}">`)).join(""):`<img src="https://via.placeholder.com/300x350.png?text=Foto+Indispon√≠vel" alt="${e.nome}" class="carousel-image visivel">`;let r=e.variacoes&&0<e.variacoes.length?`<div class="variacao-container"><select class="variacao-select" data-produto-id="${e.id}"><option value="">Escolha a cor</option>${e.variacoes.map((e=>`<option value="${e.cor}">${e.cor}</option>`)).join("")}</select></div>`:"";t.innerHTML=`${e.promocao?'<div class="selo-promocao">PROMO√á√ÉO</div>':""}<div class="produto-imagem-container" id="container-img-${e.id}">${n}</div><h2>${e.nome}</h2><p class="descricao">${e.descricao}</p><p class="preco">R$ ${e.preco.toFixed(2).replace(".",",")}</p>${r}<button class="btn-adicionar" data-id="${e.id}">Adicionar ao Carrinho</button>`,o.appendChild(t),e.imagens&&1<e.imagens.length&&iniciarCarrosselParaProduto(e.id)}))})),adicionarEventosProdutos()}function adicionarEventosProdutos(){document.querySelectorAll(".btn-adicionar").forEach((e=>{e.addEventListener("click",(o=>adicionarAoCarrinho(o.target.getAttribute("data-id"),o.target)))}))}function iniciarCarrosselParaProduto(e){const o=document.getElementById(`container-img-${e}`);if(!o)return;const t=o.querySelectorAll(".carousel-image");if(t.length<=1)return;let n=0;carrosselTimers[e]&&clearInterval(carrosselTimers[e]),carrosselTimers[e]=setInterval((()=>{t[n].classList.remove("visivel"),n=(n+1)%t.length,t[n].classList.add("visivel")}),2500)}
